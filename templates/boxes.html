{% extends "layout.html" %}

{% block header %}
    {% from notifications import boiler_ui_modules as \
        notifications %}
    {{ add_ext_file('css/boxes.css') }}
    
    {{ add_ext_file('js/main_menu.js') }}
    <button type="button" id="main-menu-button">
        <img src="{{ static_url('images/main-menu.svg') }}">
    </button>
    
    <div id="notifications">
        {% for notification in notifications %}
            {% module UIModuleLoader(notification) %}
        {% end %}
    </div>
{% end %}

{% block free_content %}
    {% from panels import boiler_ui_modules as panels %}
    
    {{ add_ext_file('css/status.css') }}
    <div id="status-panel" class="fixed-panel">
        <div class="box">
            <img id='status-panel-image'
                 src="{{
                    static_url('images/spinner.svg') }}">
            <span id='status-panel-text'>Cargando ...</span>
        </div>
    </div>
    
    <script
      src="{{ static_url('js/reconnecting-websocket.js') }}"
      type="text/javascript">
    </script>
    
    <script src="{{ static_url('js/ws.js') }}"
            type="text/javascript">
    </script>
    
    <script src="{{ static_url('js/status.js') }}"
            type="text/javascript">
    </script>
    
    <script src="{{ static_url('js/session.js') }}"
            type="text/javascript">
    </script>
    
    {{ add_ext_file('js/bubble.js') }}
    <div id="message-bubble">Message Bubble</div>
    
    <div id="content-shade"></div>
    
    <nav id="main-menu">
        {% for panel in panels %}
            <button type="button" class="main-menu-item"
                    data-panel-id="{{ panel._id }}">
                {{ panel.name }}
            </button>
        {% end %}
    </nav>

    {% for panel in panels %}
        <section class="{{ panel._class }}"
                 id="{{ panel._id }}">
            <h1 class="panel-title">{{ panel.name }}</h1>
            {% module UIModuleLoader(panel) %}
        </section>
    {% end %}
{% end %}
